# Assignments List project

### What I have done:
I developed this project with the purpose of improving my skills with, object oriented programming(OOP) and API - CRUD, utilizing MySQL as a database through sequelize ORM, to create and manipulate a list of chores.

# Tecnologies

```
Docker
Typescript
MySQL
Sequelize
Express
Json Web Token
Bycrypt
```
# How it works
This project has no front end, so it is more difficult to visualize what it does, but I will explain.

- First the user have to create and account, with basic info, like an email, a password and his name.
  - Or login in with an account, both of these will return a **Token**;
- Secondly the user will be able to see the assignments that already exists, or create a brand new one;
- If the user created an assignment and latter on saw that it is misspelled, it is possible to correct it;   
- And if an assignment is finished, the user can just leave it there, or delete it;
- Users can also chage names after an account has been created.

<details>
  <summary><strong>Routes</strong></summary>

  ### This project has three different routes

<details>
  <summary><strong>/login</strong></summary>

This route have two post methods, where, one of them is used to login, and another to register. </br>
Both of them returns a token, generated by [Json Web Token](https://jwt.io/) library.

To register a new account, users will utilize */login/register*, and send an object like this:
```json
  {
    "email": "jhonDoe@gmail.com",
    "password": "jhonDoePassword",
    "name": "John Doe"
  }
```

When loggin in, users only have to use email and password, sending an object like this:
```json
  {
    "email": "jhonDoe@gmail.com",
    "password": "jhonDoePassword"
  }
```

## Route rules:

If any of the fields is not present, like in the examples above, erros will be thrown saying that this field is required.
```json
  { "message": "Field '...' is obligatory."}
```

#### For email:
- It has to be in the following format: *email@domain.com*. If it do not follow this format this error will be sent:
```json
  { "message": "'email' must be in the following format: 'some@thing.com'."}
``` 
- An email can only be registered once, so if users try to register the same email more than one time, it will not accept, sending the message:
```json
  { "message": "Email already registered."}
```
- When loggin in, if email does not exist in the database it will send the message:
```json
  { "message": "Email or password incorrect."}
``` 

#### For password

In this project, I utilize [bycrpt](npmjs.com/package/@types/bcrypt) library. </br>
It is used to encrypt users password when registering, giving users more security.

- The only rule is that user's password must have more than three characters, if not this message will be sent:
```json
  { "message": "Password must contain at least three characters."}
```

#### For name

- The only rule for user's name is that it must be longer than two characters, if not this message will be sent:
```json
  { "message": "Name must be at least 2 characters."}
```

</details>

<details>
  <summary><strong>/assignments</strong></summary>

This is a CRUD route, where users can create an assignment, read, update and delete it. </br>
But to do that, users must have the token given to then when login in or singin in, without that, it is not possible to access this route. </br>

HTTP methods and use:

- GET:
  - This method will return all the assignments created by that user.
  ```json
    [
      {
        "id": 1,
        "userId": 1,
        "description": "Go to the supermarket",
        "created": "2022-12-01T19:57:00.000Z",
        "updated": "2022-12-01T19:57:00.000Z"
      },
      {
        "id": 2,
        "userId": 1,
        "description": "buy 4 boxes of milk and cereal",
        "created": "2022-12-01T20:01:00.000Z",
        "updated": "2022-12-01T20:01:00.000Z"
      }
    ]
  ``` 
- POST:
  - Will create a new assignment for this user, requesting only one object with a description :
  ```json
    { "description": "Wash the dishes" }
  ``` 
- PUT:
  - This method requires the id of the assignment that is going to be modified, and one object with a new description:
  ```json
    { "description": "Wash the dishes and the sink" }
  ``` 
- DELETE:
  - This method also requires the assignment id that will be delete, and if this id is valid, it will delete the assginment and return:
  ```json
    { "message": "Assignment deleted with success!" }
  ```
  - If the id is not valid, it will return the message:
  ```json
    { "message": "Invalid id." }
  ```

### Route rule

It requires that when calling any method of this route, a valid token is shipped together, else it will return:
```json
  { "message": "Inválid token!" }
```

If sending an object without the description, it will return:
```json
  { "message": "Missing assignment description." }
```
Or seding a description shorter than five character:
```json
  { "message": "Assignment description must be at least 5 characters." }
```
</details>

<details>
  <summary><strong>/Profile</strong></summary>

Profile route is the simplest route, only having two methods, both requiring the user's token.

- GET:
  - This method will return the user information like email and name, based on his token.

- PATCH:
  - This method only updated the user name, requiring an object like this:
  ```json
    { "name": "Jhon Doe Rudolf" }
  ```

### Route rule

When updating user name, it cannot be smaller than 2 character and the field "name" must be present, else those messages will be sent:

```json
  { "message": "Name must be at least 2 characters." }
```
```json
  { "message": "Field 'name' is obligatory." }
```

</details>

</details>

<details>
  <summary><strong>How to run</strong></summary>

  - First step, you want to clone this repository, use:
  ```
  git@github.com:RicardoSouza03/AssignmentsList.git
  ```

  - after that you have to access the file with the project, use:
  ```
  cd AssignmentsList
  ```

  - Once inside the project file, I advise to run it with docker, since it is already done:
    - docker will create two containers, one for the database, called db, and another for the application, called backend.
  ```
  docker-compose up -d
  ```
  
  - To start the application you have to utilize the container backend, install the dependencies, and after that start the application, you can do that using the following lines:
    - what "npm run dog" will do is, drop database, build the application, create the database and migrate the tables, and seed all of them.
  ```
  docker exec -it backend bash
  npm i
  npm run dog
  npm start
  ```

  - And finally, you can use it with some REST client to test this API.
    - I utilized thunder client, but fell free to use any other.
</details>

#

> Made by: [Ricardo Souza](https://github.com/RicardoSouza03) - 2023©